<!--pages/detail/detail.wxml-->
<view class="page-container">
  <image class="bg-image" src="/images/detailbackend.png" mode="aspectFill"></image>
  <image class="watermark" src="/images/index1.png" mode="aspectFit"></image>
  <scroll-view scroll-y class="scroll-container">
    <view class="container">
      <image class="bg-image" src="/images/indexbackend.png" mode="aspectFill"></image>
      <view class="poetry-detail">
        <view class="poetry-info">
          <view class="title-container">
            <text class="poetry-title">{{currentPoetry.title}}</text>
          </view>
          <view class="meta-container">
            <text class="poetry-meta">[{{currentPoetry.dynasty}}] {{currentPoetry.author}}</text>
          </view>
          <view class="content-container">
            <text class="poetry-content">{{currentPoetry.content}}</text>
          </view>
        </view>

        <view class="action-buttons">
          <view class="generate-button" bindtap="handleGenerate" data-type="image">
            <image src="/images/picture.png"></image>
            <text>生成图片</text>
          </view>
          <view class="generate-button" bindtap="handleGenerate" data-type="audio">
            <image src="/images/music.png"></image>
            <text>生成音频</text>
          </view>
          <view class="generate-button" bindtap="handleGenerate" data-type="video">
            <image src="/images/video.png"></image>
            <text>生成视频</text>
          </view>
        </view>

        <!-- 生成结果展示区域 -->
        <view class="result-area" wx:if="{{generatedContent}}">
          <view class="result-title">生成结果</view>
          <image wx:if="{{contentType === 'image'}}" 
                src="{{generatedContent}}" 
                mode="widthFix" 
                class="generated-image"></image>
          <view wx:if="{{contentType === 'audio'}}" class="audio-player">
            <button class="audio-btn" bindtap="handleAudioPlay">
              {{isPlaying ? '暂停' : '播放'}}
            </button>
          </view>
          <video wx:if="{{contentType === 'video'}}" 
                src="{{generatedContent}}" 
                controls></video>
          <button class="download-btn" bindtap="handleDownload">下载{{contentTypeText}}</button>
        </view>
      </view>
    </view>
  </scroll-view>
</view>